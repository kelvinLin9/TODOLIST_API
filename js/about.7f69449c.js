"use strict";(self["webpackChunktodolist_api"]=self["webpackChunktodolist_api"]||[]).push([[443],{7005:function(o,t,e){e.r(t),e.d(t,{default:function(){return M}});var s=e(3396),d=e(7139),l=e(9242),a=e(4427);const i=o=>((0,s.dD)("data-v-97aa94fe"),o=o(),(0,s.Cn)(),o),n={class:"bg-main vh-100"},c={class:"p-5 container"},r={class:"d-flex justify-content-center align-items-center mb-5"},h=i((()=>(0,s._)("img",{src:a,alt:"logo"},null,-1))),u={class:"ms-auto fs-16 d-none d-sm block"},p={class:"row"},g={class:"input-group mb-3"},k={class:"card"},_={class:"px-1"},f={class:"list"},T=["onClick"],v=i((()=>(0,s._)("input",{type:"checkbox"},null,-1))),w=["onClick"],m=["onClick"],C={class:"d-flex justify-content-between align-items-center p-3"};function b(o,t,e,a,i,b){const S=(0,s.up)("font-awesome-icon");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("div",c,[(0,s._)("div",r,[h,(0,s._)("div",u,(0,d.zw)(o.userNickname)+" 的待辦",1),(0,s._)("a",{class:"fs-16 link-dark ms-auto text-decoration-none",onClick:t[0]||(t[0]=(0,l.iM)(((...t)=>o.signOut&&o.signOut(...t)),["prevent"]))},"登出")]),(0,s._)("div",p,[(0,s._)("div",g,[(0,s.wy)((0,s._)("input",{class:"text col",type:"text",placeholder:"請輸入待辦事項","onUpdate:modelValue":t[1]||(t[1]=t=>o.todo=t)},null,512),[[l.nr,o.todo]]),(0,s._)("span",{class:"btn btn_add",onClick:t[2]||(t[2]=(...t)=>o.addTodo&&o.addTodo(...t))},"+")])]),(0,s._)("div",k,[(0,s._)("ul",{class:"tab px-4",onClick:t[6]||(t[6]=t=>o.getTodos())},[(0,s._)("li",{class:(0,d.C_)({active:"all"===o.todoStatus}),onClick:t[3]||(t[3]=t=>o.todoStatus="all")},"全部",2),(0,s._)("li",{class:(0,d.C_)({active:"work"===o.todoStatus}),onClick:t[4]||(t[4]=t=>o.todoStatus="work")},"待完成",2),(0,s._)("li",{class:(0,d.C_)({active:"down"===o.todoStatus}),onClick:t[5]||(t[5]=t=>o.todoStatus="down")},"已完成",2)]),(0,s._)("div",_,[(0,s._)("ul",f,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(o.afterFilterTodos,(t=>((0,s.wg)(),(0,s.iD)("li",{key:t.id},[(0,s._)("label",{class:"checkbox",for:"",onClick:e=>o.toggleTodo(t.id)},[v,(0,s._)("span",null,(0,d.zw)(t.content),1)],8,T),(0,s._)("a",{href:"#",class:"edit",onClick:(0,l.iM)((e=>o.editTodo(t.id)),["prevent"])},[(0,s.Wm)(S,{icon:"fa-solid fa-pen"})],8,w),(0,s._)("a",{href:"#",class:"delete",onClick:(0,l.iM)((e=>o.deleteTodo(t.id)),["prevent"])},[(0,s.Wm)(S,{icon:"fa-solid fa-trash"})],8,m)])))),128))]),(0,s._)("div",C,[(0,s._)("div",null,(0,d.zw)(o.works)+" 個待完成項目",1),(0,s._)("a",{href:"#",class:"link-secondary",onClick:t[7]||(t[7]=(0,l.iM)((t=>o.clearDowns()),["prevent"]))},"清除已完成項目")])])])])])}var S=e(2578),x=e(6637),Z=(e(7658),e(6943)),Q=e(5891);const z=(0,x.Z)(),$="https://todoo.5xcamp.us";var y=(0,S.Q_)("todoStore",{state:()=>({todo:"",todos:[],afterFilterTodos:[],updateTodo:"",todoStatus:"all",works:0}),actions:{getTodos(){const o=`${$}/todos`;Z.Z.get(o,{headers:{Authorization:z.token}}).then((o=>{this.todos=o.data.todos,this.countWorks(this.todos),this.filterTodos(this.todos),console.log(this.todos)})).catch((o=>{console.log(o),Q.Z.push("/")}))},countWorks(o){this.works=0,o.forEach((o=>{o.completed_at||(this.works+=1)}))},filterTodos(o){"all"===this.todoStatus?this.afterFilterTodos=o.filter((o=>o)):"work"===this.todoStatus?this.afterFilterTodos=o.filter((o=>!o.completed_at)):this.afterFilterTodos=o.filter((o=>o.completed_at))},addTodo(){const o=`${$}/todos`;Z.Z.post(o,{todo:{content:this.todo}},{headers:{Authorization:z.token}}).then((o=>{console.log(o),this.todo="",this.getTodos()})).catch((o=>{console.log(o),alert("QQ")}))},editTodo(o){this.updateTodo=prompt("編輯吧!少年!!");const t=`${$}/todos/${o}`;Z.Z.put(t,{todo:{content:this.updateTodo}},{headers:{Authorization:z.token}}).then((o=>{console.log(o),this.updateTodo="",this.getTodos()})).catch((o=>{console.log(o),alert("QQ")}))},deleteTodo(o){console.log(o);const t=`${$}/todos/${o}`;Z.Z["delete"](t,{headers:{Authorization:z.token}}).then((o=>{console.log(o),this.getTodos()})).catch((o=>{console.log(o),alert("QQ")}))},toggleTodo(o){const t=`${$}/todos/${o}/toggle`;Z.Z.patch(t,{},{headers:{Authorization:z.token}}).then((o=>{console.log(o),this.getTodos()})).catch((o=>{console.log(o),alert("QQ")}))},clearDowns(){this.todos.forEach((o=>{console.log(1,o.id),o.completed_at&&(console.log(o.id),this.deleteTodo(o.id))}))}}}),A={computed:{...(0,S.Ah)(y,["todo","afterFilterTodos","todoStatus","works"]),...(0,S.Ah)(x.Z,["userNickname"])},methods:{...(0,S.nv)(y,["getTodos","addTodo","editTodo","deleteTodo","toggleTodo","clearDowns"]),...(0,S.nv)(x.Z,["signOut"])},created(){this.getTodos()}},D=e(89);const F=(0,D.Z)(A,[["render",b],["__scopeId","data-v-97aa94fe"]]);var M=F}}]);
//# sourceMappingURL=about.7f69449c.js.map